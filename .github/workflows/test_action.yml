name: Test Action

on:
  workflow_run:
    workflow_dispatch:
      - '**'
    types:
      - completed
  workflow_dispatch:

jobs:
  # This step gets the timing for each workflow via GitHub API request
  updateWorkflowTimings:
    runs-on: ubuntu-latest
    # Runs for each workflow defined below
    strategy:
      matrix:
        WFs: [another_test.yml, test.yml, datadog.yml]
    steps:
      - name: Use my action
        uses: goseind/datadog-gh-actions@v1.0.0-beta
        with:
          api_key: ${{ secrets.DATADOG_API_KEY }}
          app_key: ${{ secrets.DATADOG_APPLICATION_KEY }}
          repo_path: ${{ github.repository }}
          tag_workflow_id: ${{ matrix.WFs }}
          wf: ${{ matrix.WFs }}
          github_tk: ${{ secrets.GITHUB_TOKEN }}